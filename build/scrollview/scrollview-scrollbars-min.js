YUI.add("scrollview-scrollbars",function(A){var L=A.ClassNameManager.getClassName,I,J=A.Transition.useNative,X="scrollbar",b="scrollview",a="verticalNode",M="horizontalNode",S="childCache",U="top",Q="left",G="width",T="height",P="scrollWidth",H="scrollHeight",Z="_sbh",R="_sbv",N="transitionProperty",F="transform",E="translateX(",D="translateY(",W="scaleX(",V="scaleY(",K="px",C=")",O=K+C;function B(){B.superclass.constructor.apply(this,arguments);}B.CLASS_NAMES={showing:L(b,X,"showing"),scrollbar:L(b,X),scrollbarV:L(b,X,"vert"),scrollbarH:L(b,X,"horiz"),scrollbarVB:L(b,X,"vert","basic"),scrollbarHB:L(b,X,"horiz","basic"),child:L(b,"child"),first:L(b,"first"),middle:L(b,"middle"),last:L(b,"last")};I=B.CLASS_NAMES;B.NAME="pluginScrollViewScrollbars";B.NS="scrollbars";B.SCROLLBAR_TEMPLATE=["<div>",'<span class="'+I.child+" "+I.first+'"></span>','<span class="'+I.child+" "+I.middle+'"></span>','<span class="'+I.child+" "+I.last+'"></span>',"</div>"].join("");B.ATTRS={verticalNode:{setter:"_setNode",value:A.Node.create(B.SCROLLBAR_TEMPLATE)},horizontalNode:{setter:"_setNode",value:A.Node.create(B.SCROLLBAR_TEMPLATE)}};A.namespace("Plugin").ScrollViewScrollbars=A.extend(B,A.Plugin.Base,{initializer:function(){this._host=this.get("host");this.afterHostMethod("_uiScrollY",this._update);this.afterHostMethod("_uiScrollX",this._update);this.afterHostMethod("_uiDimensionsChange",this._hostDimensionsChange);this.afterHostEvent("scrollEnd",this._hostScrollEnd);},_hostDimensionsChange:function(){var Y=this._host;this._renderBar(this.get(a),Y._scrollsVertical);this._renderBar(this.get(M),Y._scrollsHorizontal);this._update();A.later(500,this,"flash",true);},_hostScrollEnd:function(Y){if(!this._host._flicking){this.flash();}},_renderBar:function(c,e){var d=c.inDoc(),f=this._host._bb,Y=c.getData("isHoriz")?I.scrollbarHB:I.scrollbarVB;if(e&&!d){f.append(c);c.toggleClass(Y,this._basic);this._setChildCache(c);}else{if(!e&&d){c.remove();this._clearChildCache(c);}}},_setChildCache:function(f){var h=f.get("children"),d=h.item(0),g=h.item(1),e=h.item(2),Y=f.getData("isHoriz")?"offsetWidth":"offsetHeight";f.setStyle(N,F);g.setStyle(N,F);e.setStyle(N,F);f.setData(S,{fc:d,lc:e,mc:g,fcSize:d&&d.get(Y),lcSize:e&&e.get(Y)});},_clearChildCache:function(Y){Y.clearData(S);},_updateBar:function(Y,k,d,u){var i=this._host,e=this._basic,j=i._cb,p=0,l=1,c=Y.getData(S),q=c.lc,t=c.mc,y=c.fcSize,x=c.lcSize,m,v,s,h,w,o,f,r,n,g;if(u){o=G;f=Q;r=Z;n=i.get(o);g=i._scrollWidth||j.get(P);h=E;w=W;}else{o=T;f=U;r=R;n=i.get(o);g=i._scrollHeight||j.get(H);h=D;w=V;}p=Math.floor(n*(n/g));l=Math.floor((k/(g-n))*(n-p));if(p>n){p=1;}if(l>(n-p)){p=p-(l-(n-p));}else{if(l<0){p=l+p;l=0;}}m=(p-(y+x));if(m<0){m=0;}if(m===0&&l!==0){l=n-(y+x)-1;}if(d!==0){s={duration:d};if(J){s.transform=h+l+O;}else{s[f]=l+K;}Y.transition(s);}else{if(J){Y.setStyle(F,h+l+O);}else{Y.setStyle(f,l+K);}}if(this[r]!==m){this[r]=m;if(m>0){if(d!==0){s={duration:d};if(J){s.transform=w+m+C;}else{s[o]=m+K;}t.transition(s);}else{if(J){t.setStyle(F,w+m+C);}else{t.setStyle(o,m+K);}}if(!u||!e){v=p-x;if(d!==0){s={duration:d};if(J){s.transform=h+v+O;}else{s[f]=v;}q.transition(s);}else{if(J){q.setStyle(F,h+v+O);}else{q.setStyle(f,v+K);}}}}}},_update:function(c,f,g){var e=this.get(a),Y=this.get(M),d=this._host;f=(f||0)/1000;if(!this._showing){this.show();}if(d._scrollsVertical&&e){this._updateBar(e,c,f,false);}if(d._scrollsHorizontal&&Y){this._updateBar(Y,c,f,true);}},show:function(Y){this._show(true,Y);},hide:function(Y){this._show(false,Y);},_show:function(Y,e){var d=this.get(a),f=this.get(M),g=(e)?0.6:0,c=(Y)?1:0,h;this._showing=Y;if(this._flashTimer){this._flashTimer.cancel();}h={duration:g,opacity:c};if(d){d.transition(h);}if(f){f.transition(h);}},flash:function(){var Y=false,c=this._host;if(c._scrollsVertical&&(c._scrollHeight>c.get(T))){Y=true;}if(c._scrollsHorizontal&&(c._scrollWidth>c.get(G))){Y=true;}if(Y){this.show(true);this._flashTimer=A.later(800,this,"hide",true);}},_setNode:function(c,Y){var d=(Y==M);c=A.one(c);if(c){c.addClass(I.scrollbar);c.addClass((d)?I.scrollbarH:I.scrollbarV);c.setData("isHoriz",d);}return c;},_basic:A.UA.ie&&A.UA.ie<=8});},"@VERSION@",{skinnable:true,requires:["plugin"]});