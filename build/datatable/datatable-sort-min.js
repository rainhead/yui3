YUI.add("datatable-sort",function(F){var A=F.ArraySort.compare,C="asc",B="desc",G=F.ClassNameManager.getClassName("datatable","sortable"),E='<a class="{link_class}" title="{link_title}" href="{link_href}">{value}</a>';function D(){D.superclass.constructor.apply(this,arguments);}F.mix(D,{NS:"sort",NAME:"dataTableSort",ATTRS:{trigger:{value:"theadCellClick",writeOnce:"initOnly"},sortedBy:{value:null}}});F.extend(D,F.Plugin.Base,{thLinkTemplate:E,initializer:function(H){var I=this.get("host");I.get("recordset").plug(F.Plugin.RecordsetSort,{dt:I});I.get("recordset").sort.addTarget(I);this.doBefore("_createTheadThNode",this._beforeCreateTheadThNode);this.doBefore("_attachTheadThNode",function(J){J.th.addClass(G);});I.on(this.get("trigger"),this._onEventSortColumn);I.after("recordsetSort:sort",function(){I._uiSetRecordset(I.get("recordset"));});I.after("sortedByChangeEvent",function(){alert("ok");});if(I.get("rendered")){I._uiSetColumnset(I.get("columnset"));}},_beforeCreateTheadThNode:function(H){if(H.column.get("sortable")){H.value=F.substitute(this.thLinkTemplate,{link_class:"foo",link_title:"bar",link_href:"bat",value:H.value});}},_onEventSortColumn:function(L){L.halt();var J=this.get("columnset").get("hash")[L.currentTarget.get("id")],K=J.get("field"),I=this.get("sortedBy"),H=(I&&I.field===K&&I.dir===C)?B:C,M=J.get("sortFn");if(J.get("sortable")){this.get("recordset").sort.sort(K,H===B,M);this.set("sortedBy",{field:K,dir:H});}}});F.namespace("Plugin").DataTableSort=D;},"@VERSION@",{lang:["en"],requires:["plugin","datatable-base","recordset-sort"]});